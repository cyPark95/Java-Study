# 기능 분리

#### 하나의 기능은 여러 하위 기능으로 분해할 수 있다.

분리한 하위 기능을 누가 제공할지 결정하는것 이것이 객체 지향 설계의 기본 과정이다.
즉, 기능을 분리하고 각 객체에게 분리한 기능의 책임은 분배하는 것이다.

분리한 하위 기능을 이용해서 전체 기능을 완성한다.

하지만 클래스가 커지거나, 코드가 길어지면 절차 지향의 문제가 발생한다.

- 큰 클래스: 많은 필드를 많은 메서드가 공유한다.
- 큰 메서드: 많은 변수를 많은 코드가 공유한다.
- 여러 기능이 한 클래스/메서드에 섞여 있을 가능성이 높다.
    + 서로 다른 코드가 데이터를 읽고 변경하면서, 점점 코드를 수정하기 어려운 구조로 바뀌게 된다.
- 따라서 책임에 따라 알맞은 객체로 코드 분리가 필요하다.

## 책임 분리 방법

1. 패턴을 적용한다.
2. 계산 기능을 분리한다.
3. 외부와 연동을 분리한다.
4. 조건별 분기는 추상화한다.

### 패턴 적용

전형적인 역할 분리 패턴을 활용한다.

- 간단한 웹
    + 컨트롤러, 서비스, DAO
- 복잡한 도메인
    + 엔티티, 밸류, 리포지토리, 도메인 서비스
- AOP
    + Aspect(공통 기능)
- GoF
    + 팩토리, 빌더, 전략, 템플릿 메서드, 프록시/데코레이터 등

### 계산 기능 분리

계산을 통해 결과를 반환하는 코드가 있다면

- 데이터를 받고, 결과를 반환하는 부분
- 실제 계산만 하는 부분

2가지 기능으로 분리할 수 있다.

### 연동 분리

네트워크, 메시징, 파일 등 연동 처리 코드를 분리한다.

Http를 이용해서 외부연동을 하는 코드가 있다면

- 외분 연동을 수행하는 코드를 별도의 클래스로 분리할 수 있다.

### 조건 분기 추상화

연속적인 if-else 블럭을 추상화 한다.

만약 각 if-else 블럭에서의 기능이 비슷하다면, 공통점을 이용해서 추상화 할 수 있다.

따라서 조건 분기는 추상화와 하위 클래스의 형태로 역할을 분리할 수 있다.

## 주의 사항

#### 의도가 잘 드러나는 이름을 사용해야 한다.

## 역할 분리의 장점

- 역할 분리를 하면 테스트가 용이해진다.
    + 특정 일부 기능만을 테스트하기가 편해진다.
